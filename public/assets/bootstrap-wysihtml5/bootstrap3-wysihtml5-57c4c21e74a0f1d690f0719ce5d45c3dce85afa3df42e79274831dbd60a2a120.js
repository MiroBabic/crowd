!function(t){"function"==typeof define&&define.amd?define("bootstrap.wysihtml5",["jquery","wysihtml5","bootstrap","bootstrap.wysihtml5.templates","bootstrap.wysihtml5.commands"],t):t(jQuery,wysihtml5)}(function(t,o){var e=function(t,o){"use strict";var e=function(t,e,n){return o.tpl[t]?o.tpl[t]({locale:e,options:n}):void 0},n=function(e,n){this.el=e;var a=t.extend(!0,{},i,n);for(var s in a.customTemplates)o.tpl[s]=a.customTemplates[s];this.toolbar=this.createToolbar(e,a),this.editor=this.createEditor(a)};n.prototype={constructor:n,createEditor:function(e){e=e||{},e=t.extend(!0,{},e),e.toolbar=this.toolbar[0];var n=new o.Editor(this.el[0],e);if(n.composer.editableArea.contentDocument?this.addMoreShortcuts(n,n.composer.editableArea.contentDocument.body||n.composer.editableArea.contentDocument,e.shortcuts):this.addMoreShortcuts(n,n.composer.editableArea,e.shortcuts),e&&e.events)for(var a in e.events)n.on(a,e.events[a]);return n.on("beforeload",this.syncBootstrapDialogEvents),n},syncBootstrapDialogEvents:function(){var o=this;t.map(this.toolbar.commandMapping,function(t,o){return[t]}).filter(function(t,o,e){return t.dialog}).map(function(t,o,e){return t.dialog}).forEach(function(e,n,a){e.on("show",function(o){t(this.container).modal("show")}),e.on("hide",function(e){t(this.container).modal("hide"),o.composer.focus()}),t(e.container).on("shown.bs.modal",function(){t(this).find("input, select, textarea").first().focus()})})},createToolbar:function(o,n){var a=this,l=t("<ul/>",{"class":"wysihtml5-toolbar",style:"display:none"}),r=n.locale||i.locale||"en";s.hasOwnProperty(r)||(console.debug("Locale '"+r+"' not found. Available locales are: "+Object.keys(s)+". Falling back to 'en'."),r="en");var c=t.extend(!0,{},s.en,s[r]);for(var u in n.toolbar)n.toolbar[u]&&(l.append(e(u,c,n)),"html"===u&&this.initHtml(l));return l.find('a[data-wysihtml5-command="formatBlock"]').click(function(o){var e=o.delegateTarget||o.target||o.srcElement,n=t(e),i=n.data("wysihtml5-display-format-name"),s=n.data("wysihtml5-format-name")||n.html();(void 0===i||"true"===i)&&a.toolbar.find(".current-font").text(s)}),l.find('a[data-wysihtml5-command="foreColor"]').click(function(o){var e=o.target||o.srcElement,n=t(e);a.toolbar.find(".current-color").text(n.html())}),this.el.before(l),l},initHtml:function(t){var o='a[data-wysihtml5-action="change_view"]';t.find(o).click(function(e){t.find("a.btn").not(o).toggleClass("disabled")})},addMoreShortcuts:function(t,e,n){o.dom.observe(e,"keydown",function(e){var a=e.keyCode,i=n[a];if((e.ctrlKey||e.metaKey||e.altKey)&&i&&o.commands[i]){var s=t.toolbar.commandMapping[i+":null"];s&&s.dialog&&!s.state?s.dialog.show():o.commands[i].exec(t.composer,i),e.preventDefault()}})}};var a={resetDefaults:function(){t.fn.wysihtml5.defaultOptions=t.extend(!0,{},t.fn.wysihtml5.defaultOptionsCache)},bypassDefaults:function(o){return this.each(function(){var e=t(this);e.data("wysihtml5",new n(e,o))})},shallowExtend:function(o){var e=t.extend({},t.fn.wysihtml5.defaultOptions,o||{},t(this).data()),n=this;return a.bypassDefaults.apply(n,[e])},deepExtend:function(o){var e=t.extend(!0,{},t.fn.wysihtml5.defaultOptions,o||{}),n=this;return a.bypassDefaults.apply(n,[e])},init:function(t){var o=this;return a.shallowExtend.apply(o,[t])}};t.fn.wysihtml5=function(o){return a[o]?a[o].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof o&&o?void t.error("Method "+o+" does not exist on jQuery.wysihtml5"):a.init.apply(this,arguments)},t.fn.wysihtml5.Constructor=n;var i=t.fn.wysihtml5.defaultOptions={toolbar:{"font-styles":!0,color:!1,emphasis:{small:!0},blockquote:!0,lists:!0,html:!1,link:!0,image:!0,smallmodals:!1},parserRules:{classes:{"wysiwyg-color-silver":1,"wysiwyg-color-gray":1,"wysiwyg-color-white":1,"wysiwyg-color-maroon":1,"wysiwyg-color-red":1,"wysiwyg-color-purple":1,"wysiwyg-color-fuchsia":1,"wysiwyg-color-green":1,"wysiwyg-color-lime":1,"wysiwyg-color-olive":1,"wysiwyg-color-yellow":1,"wysiwyg-color-navy":1,"wysiwyg-color-blue":1,"wysiwyg-color-teal":1,"wysiwyg-color-aqua":1,"wysiwyg-color-orange":1},tags:{b:{},i:{},strong:{},em:{},p:{},br:{},ol:{},ul:{},li:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},blockquote:{},u:1,img:{check_attributes:{width:"numbers",alt:"alt",src:"url",height:"numbers"}},a:{check_attributes:{href:"url"},set_attributes:{target:"_blank",rel:"nofollow"}},span:1,div:1,small:1,code:1,pre:1}},locale:"en",shortcuts:{83:"small"}};"undefined"==typeof t.fn.wysihtml5.defaultOptionsCache&&(t.fn.wysihtml5.defaultOptionsCache=t.extend(!0,{},t.fn.wysihtml5.defaultOptions));var s=t.fn.wysihtml5.locale={}};e(t,o)});